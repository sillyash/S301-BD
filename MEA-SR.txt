CREATE TABLE Groupe(
   idGroupe INT,
   nomGroupe VARCHAR(50) ,
   PRIMARY KEY(idGroupe)
);

CREATE TABLE Theme(
   idTheme INT,
   nomTheme VARCHAR(50) ,
   PRIMARY KEY(idTheme)
);

CREATE TABLE Internaute(
   idInternaute INT,
   nomInter VARCHAR(50) ,
   prenomInter VARCHAR(50) ,
   emailInter VARCHAR(50) ,
   loginInter VARCHAR(50) ,
   mdpInter VARCHAR(90)  NOT NULL,
   adrInter VARCHAR(50) ,
   PRIMARY KEY(idInternaute)
);

CREATE TABLE Budget(
   idBudget INT,
   limiteBudgetGlobal INT,
   evalProposition INT,
   PRIMARY KEY(idBudget)
);

CREATE TABLE Reaction(
   idReaction INT,
   typeReaction INT,
   PRIMARY KEY(idReaction)
);

CREATE TABLE Notification(
   idNotification INT,
   typeNotification VARCHAR(50) ,
   messageNotification VARCHAR(50) ,
   etatNotification VARCHAR(50) ,
   frequenceNotification VARCHAR(50) ,
   PRIMARY KEY(idNotification)
);

CREATE TABLE Role(
   idRole INT,
   nomRole VARCHAR(50)  NOT NULL,
   PRIMARY KEY(idRole),
   UNIQUE(nomRole)
);

CREATE TABLE Proposition(
   idProposition INT,
   titreProposition VARCHAR(50) ,
   descProposition VARCHAR(50) ,
   popularite INT NOT NULL,
   dateProp DATETIME NOT NULL,
   idBudget INT NOT NULL,
   PRIMARY KEY(idProposition),
   FOREIGN KEY(idBudget) REFERENCES Budget(idBudget)
);

CREATE TABLE Commentaire(
   idCommentaire INT,
   descCommentaire VARCHAR(50) ,
   dateCommentaire DATETIME,
   idInternaute INT NOT NULL,
   idProposition INT NOT NULL,
   PRIMARY KEY(idCommentaire),
   FOREIGN KEY(idInternaute) REFERENCES Internaute(idInternaute),
   FOREIGN KEY(idProposition) REFERENCES Proposition(idProposition)
);

CREATE TABLE Scrutin(
   idScrutin INT,
   dureeDiscussion INT,
   dureeScrutin INT,
   natureScrutin VARCHAR(50) ,
   resultatScrutin VARCHAR(50) ,
   idProposition INT NOT NULL,
   PRIMARY KEY(idScrutin),
   FOREIGN KEY(idProposition) REFERENCES Proposition(idProposition)
);

CREATE TABLE Signalement(
   idSignalement INT,
   nbSignalements INT NOT NULL,
   idInternaute INT NOT NULL,
   idProposition INT NOT NULL,
   idCommentaire INT NOT NULL,
   PRIMARY KEY(idSignalement),
   UNIQUE(idInternaute),
   UNIQUE(idProposition),
   UNIQUE(idCommentaire),
   FOREIGN KEY(idInternaute) REFERENCES Internaute(idInternaute),
   FOREIGN KEY(idProposition) REFERENCES Proposition(idProposition),
   FOREIGN KEY(idCommentaire) REFERENCES Commentaire(idCommentaire)
);

CREATE TABLE A_pour_theme(
   idProposition INT,
   idTheme INT,
   PRIMARY KEY(idProposition, idTheme),
   FOREIGN KEY(idProposition) REFERENCES Proposition(idProposition),
   FOREIGN KEY(idTheme) REFERENCES Theme(idTheme)
);

CREATE TABLE Fait_partie_de(
   idGroupe INT,
   idInternaute INT,
   idRole INT,
   PRIMARY KEY(idGroupe, idInternaute, idRole),
   FOREIGN KEY(idGroupe) REFERENCES Groupe(idGroupe),
   FOREIGN KEY(idInternaute) REFERENCES Internaute(idInternaute),
   FOREIGN KEY(idRole) REFERENCES Role(idRole)
);

CREATE TABLE A_pour_reaction(
   idProposition INT,
   idReaction INT,
   PRIMARY KEY(idProposition, idReaction),
   FOREIGN KEY(idProposition) REFERENCES Proposition(idProposition),
   FOREIGN KEY(idReaction) REFERENCES Reaction(idReaction)
);

CREATE TABLE Reagit(
   idInternaute INT,
   idReaction INT,
   PRIMARY KEY(idInternaute, idReaction),
   FOREIGN KEY(idInternaute) REFERENCES Internaute(idInternaute),
   FOREIGN KEY(idReaction) REFERENCES Reaction(idReaction)
);

CREATE TABLE Concerne_la_notification(
   idProposition INT,
   idNotification INT,
   PRIMARY KEY(idProposition, idNotification),
   FOREIGN KEY(idProposition) REFERENCES Proposition(idProposition),
   FOREIGN KEY(idNotification) REFERENCES Notification(idNotification)
);

CREATE TABLE Est_envoye_au_membre(
   idInternaute INT,
   idNotification INT,
   PRIMARY KEY(idInternaute, idNotification),
   FOREIGN KEY(idInternaute) REFERENCES Internaute(idInternaute),
   FOREIGN KEY(idNotification) REFERENCES Notification(idNotification)
);

CREATE TABLE Propose(
   idProposition INT,
   idInternaute INT,
   PRIMARY KEY(idProposition, idInternaute),
   FOREIGN KEY(idProposition) REFERENCES Proposition(idProposition),
   FOREIGN KEY(idInternaute) REFERENCES Internaute(idInternaute)
);

CREATE TABLE Vote(
   idInternaute INT,
   idScrutin INT,
   PRIMARY KEY(idInternaute, idScrutin),
   FOREIGN KEY(idInternaute) REFERENCES Internaute(idInternaute),
   FOREIGN KEY(idScrutin) REFERENCES Scrutin(idScrutin)
);
